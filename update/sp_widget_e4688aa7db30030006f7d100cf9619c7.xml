<?xml version="1.0" encoding="UTF-8"?>
<record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <client_script><![CDATA[function() {
  var c = this;
	
	//Initialize Chat Vars
	c.data.lastMsg = '';
	c.data.botmsg = 'Lex is standing by'
	
	//Initialize Lex
	c.lexruntime = new AWS.LexRuntime();
	
	c.talktobot = function(){
		c.data.botmsg = 'Message (' + c.data.toBot + ') received';
		c.data.lastMsg = c.data.toBot;
		c.data.toBot = '';
		console.log(c.lexruntime);
		console.log(c.data);
	}
}
]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>lex_widget</id>
        <internal>false</internal>
        <link/>
        <name>Lex Widget</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
	
	//Initialize AWS Properties
	data.botURI = gs.getProperty('benedettitech.lex.api.url')
	data.clientid = gs.getProperty('benedettitech.lex.api.id');
	data.clientsecret = gs.getProperty('benedettitech.lex.api.secret')
	data.lexuser = gs.getProperty('benedettitech.lex.username')
	
})();
]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2017-08-31 15:55:33</sys_created_on>
        <sys_id>e4688aa7db30030006f7d100cf9619c7</sys_id>
        <sys_mod_count>45</sys_mod_count>
        <sys_name>Lex Widget</sys_name>
        <sys_package display_value="Lex Experiment" source="x_70280_lex_experi">f7ebc745db20030015ee52b0cf9619ad</sys_package>
        <sys_policy/>
        <sys_scope display_value="Lex Experiment">f7ebc745db20030015ee52b0cf9619ad</sys_scope>
        <sys_update_name>sp_widget_e4688aa7db30030006f7d100cf9619c7</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2017-09-01 20:22:37</sys_updated_on>
        <template><![CDATA[<div>
<h1>
  Lex Experiment Page
  </h1>
   Message to send: <input ng-model="c.data.toBot"><span></span>
  <button ng-click="c.talktobot()">
    Send Message
  </button>
  <br>
 You entered: {{c.data.lastMsg}}
</div>

<div>
  Message from Lex:  {{c.data.botmsg}}
</div>]]></template>
    </sp_widget>
</record_update>
